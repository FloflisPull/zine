<!DOCTYPE html>

<html>
<head>
  <title>README</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="https://strd6.github.io/cdn/parallel/docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    <ul class="sections">
      <li id="section-1">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-1">&#182;</a>
    </div>
    <h1 id="zine-os">Zine OS</h1>
<p>DIY E-Zine and Operating System</p>
<h1 id="interfaces">Interfaces</h1>

  </div>
  <div class="content"><pre><code>
</code></pre>
</div>
</li>
<li id="section-2">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-2">&#182;</a>
    </div>
    <h2 id="fs-interface">FS Interface</h2>

  </div>
  <div class="content"><pre><code>
</code></pre>
</div>
</li>
<li id="section-3">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-3">&#182;</a>
    </div>
    <p>Read a blob from a path, returns a promise fulfilled with the blob object. The
blob is annotated with the path i.e.: blob.path == path</p>

  </div>
  <div class="content"><pre><code>read: (path) -&gt;</code></pre>
</div>
</li>
<li id="section-4">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-4">&#182;</a>
    </div>
    <p>Write a blob to a path, returns a promise that is fulfilled when the write succeeds.</p>

  </div>
  <div class="content"><pre><code>write: (path, blob) -&gt;</code></pre>
</div>
</li>
<li id="section-5">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-5">&#182;</a>
    </div>
    <p>Delete a file at a path, returns a promise that is fulfilled when the delete succeeds.</p>

  </div>
  <div class="content"><pre><code>delete: (path) -&gt;</code></pre>
</div>
</li>
<li id="section-6">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-6">&#182;</a>
    </div>
    <p>Returns a promise</p>

  </div>
  <div class="content"><pre><code>list: (directoryPath) -&gt;</code></pre>
</div>
</li>
<li id="section-7">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-7">&#182;</a>
    </div>
    <h2 id="fileentry-interface">FileEntry Interface</h2>

  </div>
  <div class="content"><pre><code>
</code></pre>
</div>
</li>
<li id="section-8">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-8">&#182;</a>
    </div>
    
  </div>
  <div class="content"><pre><code>path:
size:
type:</code></pre>
</div>
</li>
<li id="section-9">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-9">&#182;</a>
    </div>
    <h2 id="folderentry-interface">FolderEntry Interface</h2>

  </div>
  <div class="content"><pre><code>
</code></pre>
</div>
</li>
<li id="section-10">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-10">&#182;</a>
    </div>
    
  </div>
  <div class="content"><pre><code>folder: true
path:</code></pre>
</div>
</li>
<li id="section-11">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-11">&#182;</a>
    </div>
    <h2 id="application-interface">Application Interface</h2>

  </div>
  <div class="content"><pre><code>
</code></pre>
</div>
</li>
<li id="section-12">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-12">&#182;</a>
    </div>
    <p>Application objects are views (they have an element, usually a UI window).</p>

  </div>
  <div class="content"><pre><code>element: DOMElement
exit: -&gt; # Exit the app and remove its element from the DOM
send: -&gt; Promise</code></pre>
</div>
</li>
<li id="section-13">
  <div class="annotation">
    <div class="pilwrap">
      <a class="pilcrow" href="#section-13">&#182;</a>
    </div>
    <p>Apps can communicate with each other by sending messages via the <code>send</code> method.
Since apps can be running inside iframes or other places all data needs to be
able to survive transit through the structured clone algorithm:
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm">https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm</a></p>
<p><code>send</code> returns a promise that is fulfilled with the result of the method or
rejected with an error. The first argument of send is the name of the method to
invoke in the application, the following arguments are the parameters to be
passed to that method.</p>
<p><code>exit</code> gives the app a chance to respond and prompt to cancel to prevent losing
unsaved work. (TODO)</p>
<p>TODO: Add methods for binding/connecting observables.
TODO: Add methods for connecting streams.</p>

  </div>
  <div class="content"><pre><code>
</code></pre>
</div>
</li>
    </ul>
  </div>
  <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.6.3/coffee-script.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dexie/2.0.0-beta.7/dexie.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.7.1/coffee-script.min.js"></script>
<script src="https://danielx.whimsy.space/cdn/cognito/sdk.min.js"></script>
<script src="https://danielx.whimsy.space/cdn/cognito/identity.min.js"></script>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.20.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script><script>
  (function() {
  var ErrorReporter, bindUpdates, createEditor, exec, findInteractiveElements, readShebang, runners;

  createEditor = function(code, shebang, section) {
    var annotationElement, contentElement, editorElement, exampleSection, runtimeElement;
    exampleSection = $("<li>", {
      "class": "example"
    });
    annotationElement = $("<div>", {
      "class": "annotation"
    });
    editorElement = $("<textarea>", {
      "class": "annotation",
      text: code
    });
    contentElement = $("<div>", {
      "class": "content"
    });
    runtimeElement = $("<div>", {
      "class": "output"
    });
    contentElement.append(runtimeElement);
    annotationElement.append(editorElement);
    exampleSection.append(annotationElement);
    exampleSection.append(contentElement);
    section.after(exampleSection);
    return bindUpdates(shebang, editorElement, runtimeElement);
  };

  bindUpdates = function(shebang, editorElement, runtimeElement) {
    return editorElement.on("keyup", function() {
      var e, report, source;
      report = ErrorReporter(editorElement);
      source = editorElement.val();
      try {
        runners[shebang]({
          editorElement: editorElement,
          source: source,
          runtimeElement: runtimeElement
        });
        return report.clear();
      } catch (_error) {
        e = _error;
        return report(e);
      }
    });
  };

  readShebang = function(source) {
    var match;
    if (match = source.match(/^\#\! (.*)\n/)) {
      return match[1];
    }
  };

  ErrorReporter = function(editor) {
    var reporter;
    reporter = function(error) {
      var errorParagraph;
      if (editor.next().is("p.error")) {
        return editor.next().text(error);
      } else {
        errorParagraph = $("<p>", {
          "class": "error",
          text: error.toString()
        });
        return editor.after(errorParagraph);
      }
    };
    reporter.clear = function() {
      if (editor.next().is("p.error")) {
        return editor.next().remove();
      }
    };
    return reporter;
  };

  findInteractiveElements = function() {
    return $("blockquote > pre > code").each(function() {
      var blockQuoteElement, code, codeElement, sectionElement, shebang;
      codeElement = $(this);
      code = codeElement.text();
      if (shebang = readShebang(code)) {
        if (!runners[shebang]) {
          return;
        }
        code = code.split("\n").slice(1).join("\n");
        blockQuoteElement = codeElement.parent().parent();
        sectionElement = blockQuoteElement.parent().parent();
        blockQuoteElement.remove();
        return createEditor(code, shebang, sectionElement);
      }
    });
  };

  runners = {};

  (typeof window !== "undefined" && window !== null ? window : global).Interactive = {
    register: function(name, runner) {
      runners[name] = runner;
      findInteractiveElements();
      return $('#container').on('keyup', 'textarea', function() {
        $(this).height(0);
        return $(this).height(this.scrollHeight);
      }).find('textarea').keyup();
    }
  };

  exec = function(_arg) {
    var code, editorElement, runtimeElement, source;
    source = _arg.source, code = _arg.code, editorElement = _arg.editorElement, runtimeElement = _arg.runtimeElement;
    runtimeElement.remove();
    editorElement.replaceWith($("<pre>", {
      text: source
    }));
    return setTimeout(function() {
      return Function(code)();
    }, 0);
  };

  $(function() {
    Interactive.register("setup", function(params) {
      params.code = CoffeeScript.compile(params.source);
      return exec(params);
    });
    return Interactive.register("setup-js", function(params) {
      params.code = params.source;
      return exec(params);
    });
  });

}).call(this);

</script><script src="package.js"></script>
</body>
</html>